<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bzz.cloud.rbac.dao.SysUserDao">

	<sql id="userColumns">
		t.id,
		t.login_name,
		t.password,
		t.work_num,
		t.name,
		t.email,
		t.phone,
		t.mobile,
		t.user_type,
		t.photo,
		t.old_login_name,
		t.new_password,
		t.is_account_non_expired,
		t.is_account_non_locked,
		t.is_credentials_non_expired,
		t.is_enabled,
		t.create_user_id AS "createUserId",
		t.create_time,
		t.update_user_id AS "updateUserId",
		t.update_time,
		t.todo,
		t.del_flag

	</sql>

	<!--根据编号获得用户 -->
	<select id="get" resultType="com.bzz.cloud.rbac.entity.SysUser">
		SELECT
		<include refid="userColumns"/>
		FROM sys_user t WHERE t.id = #{id}
	</select>

	<select id="selectUser">
		SELECT
		<include refid="userColumns"/>
		FROM sys_user t
		WHERE t.del_flag = 0  and t.id = 1
	</select>

	<!-- 分页查询用户信息 -->
	<select id="selectPage" resultType="com.bzz.cloud.rbac.entity.SysUser">
		SELECT
		<include refid="userColumns"/>
		FROM sys_user t
		<where>
			t.del_flag = 0 and t.id = 1
		</where>
		<!--<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.update_date DESC
			</otherwise>
		</choose>-->
	</select>

	<select id="selectList" resultType="com.bzz.cloud.rbac.entity.SysUser">
		SELECT
		<include refid="userColumns"/>
		FROM sys_user t
		WHERE t.del_flag = 0
	</select>


	<insert id="insert"  useGeneratedKeys="true" keyProperty="id" >
		INSERT INTO sys_user(
				id,
				login_name,
				password,
				work_num,
				name,
				email,
				phone,
				mobile,
				user_type,
				photo,
				old_login_name,
				new_password,
				is_account_non_expired,
				is_account_non_locked,
				is_credentials_non_expired,
				is_enabled,
				create_user,
				create_time,
				update_user,
				update_time,
				todo,
				del_flag
				) VALUES (
								 #{id},
								 #{loginName},
								 #{password},
								 #{workNum},
								 #{name},
								 #{email},
								 #{phone},
								 #{mobile},
								 #{userType},
								 #{photo},
								 #{oldLoginName},
								 #{newPassword},
								 #{isAccountNonExpired},
								 #{isAccountNonLocked},
								 #{isCredentialsNonExpired},
								 #{isEnabled},
								 #{createUser.id},
								 #{createTime},
								 #{createUser.id},
								 #{updateTime},
								 #{todo},
								 #{delFlag}
								 )
	</insert>


</mapper>